<!DOCTYPE html>
<html>
<head><meta charset="utf-8" /><title>Netlify CMS</title></head>
<body>
  <script src="https://unpkg.com/netlify-cms@^2.10.60/dist/netlify-cms.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      console.log("Netlify CMS loading...");
      if (typeof CMS === 'undefined') {
        console.error("CMS not loaded yet!");
        return;
      }
      window.CMS_MANUAL_INIT = true;
      try {
        const config = {
          backend: {
            name: "github",
            repo: "MapyWiedzy/edukacja",
            branch: "main",
            auth_type: "oauth",
            base_url: "https://api.github.com",
            auth_endpoint: "https://github.com/login/oauth/authorize",
            token_endpoint: "https://github.com/login/oauth/access_token"
          },
          media_folder: "static/images/uploads",
          public_folder: "/images/uploads"
        };
        const result = CMS.init({ config });
        console.log("CMS init result:", result);
        if (result && typeof result.then === 'function') {
          result.then(() => console.log("CMS initialized")).catch(err => {
            console.error("CMS error:", err);
            console.error("Stack trace:", err.stack);
          });
        } else {
          console.error("CMS.init did not return a Promise:", result);
        }
      } catch (err) {
        console.error("CMS init failed:", err);
      }
    });
  </script>
</body>
</html>